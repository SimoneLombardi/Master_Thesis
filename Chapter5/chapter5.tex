%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8
% THESIS CHAPTER

\chapter{Simulation environment and experiments}
\label{chap:fifth}
\graphicspath{{Chapter5/Figures/PNG/}{Chapter5/Figures/JPG/}{Chapter5/Figures/JPEG/}{Chapter5/Figures/}}

The simulation environment uses \textit{rviz} for visualizing the movement of the robot. The obstacle used is in the form of a cylinder.
\begin{figure}[H]
	\centering
	\begin{subfigure}{0.49\textwidth}
		\includegraphics[width=\linewidth]{single_obstacle.png}
		\caption{Cylinder obstacle rendering}
		\label{fig:cylinderImage}
	\end{subfigure}
	\hfill
	\begin{subfigure}{0.49\textwidth}
		\includegraphics[width=\linewidth]{single_obstacle_topview.png}
		\caption{Cylinder obstacle top view}
	\end{subfigure}
\end{figure}
The obstacles are used singularly or in a gate configuration, but the generated \textit{minimum distance} task is always one. Since in the real scenario the sensor output is a single \textit{point cloud} for the whole environment, this approach more closely resembles the real world application.
\begin{figure}[H]
	\centering
	\includegraphics[scale=0.25]{multi_obstacle.png}
	\caption{Multi obstacle configuration}
	\label{fig:cylinderMultiImage}
\end{figure}
\noindent The relative position and orientation of the obstacles will be discussed in relation to each experiment.
Lastly I used the \textit{chassis point cloud} to evaluate the motion in an environment similar to the one of \textit{Sesto senso}.
\begin{figure}[H]
	\centering
	\includegraphics[scale=0.25]{chassis_obstacle.png}
	\caption{Chassis pointcloud}
	\label{fig:chassisImage}
\end{figure}

\subsection{Velocity gain tuning}
This tests were aimed to evaluate the effect of different \textit{velocity gain} for the \textit{Kuka} and \textit{Ur10e}. The test was performed with only the \textit{End effector target} task active, the following graphs show the \textit{norm} of the \textit{cartesian error} in time during the experiments.\\


% -> execution time

% -> position error in time
% -> DIFFERENCE in solution after changing the gain value
\subsection{Obstacle avoidance test}
% -> correct avoidance of the obstacle 
% -> link distance from ob in time

\subsection{Single obstacle}
% activation delta effects
% -> point cloud flickering --> implemented solution

% tg behind 2D 3d

% consecutive targhet

\subsection{Multiple obstacles}
% snake movement

\subsection{Chassis test}
% test 1 2 

% test 3 (uc1 type movement)


